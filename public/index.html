<!doctype html>
<html>

<head>
  <meta charset='utf8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>

  <title>Thought Tagging</title>

  <link rel='icon' type='image/png' href='favicon.png'>
  <link rel='stylesheet' href='bundle.css'>
  <link rel='stylesheet' href='global.css'>
  <script defer src="https://kit.fontawesome.com/c6b5713b1f.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css" />
  <script type="text/javascript">
    function init() {
      function unescapeURL(s) {
        return decodeURIComponent(s.replace(/\+/g, '%20'));
      }
      var params = {};
      var m = window.location.href.match(/[\\?&]([^=]+)=([^&#]*)/g);
      if (m) {
        var i = 0;
        while (i < m.length) {
          var a = m[i].match(/.([^=]+)=(.*)/);
          params[unescapeURL(a[1])] = unescapeURL(a[2]);
          i += 1;
        }
      }
      if (!params.workerId && !params.assignmentId && !params.hitId) {
        var div = document.createElement('div');
        var content = document.createTextNode('Not authorized');
        div.appendChild(content);
        document.body.appendChild(div);
        console.log('Non mturk referal');
      } else if (params.assignmentId === 'ASSIGNMENT_ID_NOT_AVAILABLE') {
        // TODO: Move this logic to App.svelte
        var div = document.createElement('div');
        var content = document.createTextNode('Mturk ad');
        div.appendChild(content);
        document.body.appendChild(div);
        console.log('mturk preview');
      } else {
        var app = document.createElement('script');
        app.setAttribute('src', 'bundle.js');
        document.body.appendChild(app);
        console.log('mturk accept');
      }
    }
  </script>
</head>

<body onLoad="init()">
</body>

</html>